root@yang-server:~# history
    1  apt-get update -y
    2  curl -sfL https://get.k3s.io | sh -
    3  curl -sfL https://get.k3s.io | sh
    4  kubectl get nodes -o wide
    5  curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3
    6  curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | sh
    7  chmod 700 get_helm.sh
    8  ./get_helm.sh
    9  export KUBECONFIG=/etc/rancher/k3s/k3s.yaml
   10  helm list
   11  helm install rancher rancher-stable/rancher   --namespace cattle-system   --set hostname=yang-infra.ci-qa.rancher.space   --set ingress.tls.source=letsEncrypt   --set letsEncrypt.email=yang.chiu@suse.com
   12  helm repo add rancher-latest https://releases.rancher.com/server-charts/latest
   13  kubectl create namespace cattle-system
   14  kubectl apply --validate=false -f https://github.com/jetstack/cert-manager/releases/download/v1.0.4/cert-manager.crds.yaml
   15  kubectl create namespace cert-manager
   16  helm repo add jetstack https://charts.jetstack.io
   17  helm repo update
   18  helm install cert-manager jetstack/cert-manager --namespace cert-manager --version v1.4.0
   19  kubectl get pods --namespace cert-manager
   20  helm install rancher rancher-stable/rancher   --namespace cattle-system   --set hostname=yang-infra.ci-qa.rancher.space   --set ingress.tls.source=letsEncrypt   --set letsEncrypt.email=yang.chiu@suse.com
   21  helm repo add rancher-stable https://releases.rancher.com/server-charts/stable
   22  helm repo update
   23  helm install rancher rancher-stable/rancher   --namespace cattle-system   --set hostname=yang-infra.ci-qa.rancher.space   --set ingress.tls.source=letsEncrypt   --set letsEncrypt.email=yang.chiu@suse.com
   24  kubectl -n cattle-system rollout status deploy/rancher
   25  kubectl get secret --namespace cattle-system bootstrap-secret -o go-template='{{.data.bootstrapPassword|base64decode}}{{"\n"}}'
   26  add repo in rancher:  https://charts.jenkins.io
   27  kubectl get ingress
   28  kubectl get svc
   29  add repo in rancher:  https://charts.jenkins.io
   30  kubectl get pods -n jenkins
   31  kubectl describe pod -n jenkins jenkins-0
   32  kubectl logs -n jenkins jenkins-0
   33  kubectl logs -n jenkins jenkins-0 -c init
   34  kubectl get pods -n jenkins
   35  kubectl logs -n jenkins jenkins-0 -c init
   36  kubectl get pods -n jenkins
   37  kubectl logs -n jenkins jenkins-0 -c init
   38  kubectl get pods -n jenkins
   39  kubectl delete pod jenkins-0 -n jenkins
   40  kubectl get pods -n jenkins
   41  kubectl logs -n jenkins jenkins-0 -c init
   42  kubectl logs -n jenkins jenkins-0 -c init -w
   43  kubectl logs -n jenkins jenkins-0 -c init -f
   44  kubectl logs -n jenkins jenkins-0
   45  kubectl logs -n jenkins jenkins-0 -c jenkins
   46  kubectl logs -n jenkins jenkins-0 -c jenkins | grep 'Boots'
   47  kubectl logs -n jenkins jenkins-0 -c jenkins | grep -o 'Boots'
   48  kubectl logs -n jenkins jenkins-0 -c jenkins | grep -o 'boots'
   49  kubectl exec --namespace jenkins -it svc/jenkins -c jenkins -- /bin/cat /run/secrets/chart-admin-password && echo
   50  ls /root/.cahce
   51  ls /root/.cache
   52  history
   ---
   root@yang-server:~# history
    1  apt-get update -y
    2  curl -sfL https://get.k3s.io | sh
    3  ls /etc/
    4  curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3
    5  chmod 700 get_helm.sh
    6  ./get_helm.sh
    7  export KUBECONFIG=/etc/rancher/k3s/k3s.yaml
    8  helm list
    9  helm repo add rancher-latest https://releases.rancher.com/server-charts/latest
   10  kubectl create namespace cattle-system
   11  kubectl apply --validate=false -f https://github.com/jetstack/cert-manager/releases/download/v1.0.4/cert-manager.crds.yaml
   12  kubectl create namespace cert-manager
   13  helm repo add jetstack https://charts.jetstack.io
   14  helm repo update
   15  helm install cert-manager jetstack/cert-manager --namespace cert-manager --version v1.4.0
   16  kubectl get pods --namespace cert-manager
   17  helm repo add rancher-stable https://releases.rancher.com/server-charts/stable
   18  helm repo update
   19  helm install rancher rancher-stable/rancher   --namespace cattle-system   --set hostname=yang-infra.ci-qa.rancher.space   --set ingress.tls.source=letsEncrypt   --set letsEncrypt.email=yang.chiu@suse.com
   20  kubectl -n cattle-system rollout status deploy/rancher
   21  kubectl get all -A
   22  kubectl get service/traefik -n kube-system -o yaml
   23  ls
   24  ls -al
   25  cd .config/
   26  ls
   27  cd helm
   28  ls
   29  cd ..
   30  ls
   31  cd ..
   32  ls
   33  cd /etc/k3s
   34  ls
   35  cd /etc
   36  ls
   37  cd rancher/
   38  ls
   39  cd k3s/
   40  ls
   41  ls -al
   42  cd ..
   43  ls
   44  ls -al
   45  cd node
   46  ls
   47  cat password
   48  cat /var/lib/rancher/k3s/server/manifests/traefik.yaml
   49  kubectl apply -f https://github.com/jetstack/cert-manager/releases/download/v1.5.1/cert-manager.crds.yaml
   50  helm install cert-manager jetstack/cert-manager   --namespace cert-manager   --create-namespace   --version v1.5.1
   51  export
   52  export KUBECONFIG=/etc/rancher/k3s/k3s.yaml
   53  helm install cert-manager jetstack/cert-manager   --namespace cert-manager   --create-namespace   --version v1.5.1
   54  helm uninstall cert-manager -n cert-manager
   55  helm install cert-manager jetstack/cert-manager   --namespace cert-manager   --create-namespace   --version v1.5.1
   56  kubectl get pods --namespace cert-manager
   57  helm uninstall rancher -n cattle-system
   58  helm install rancher rancher-stable/rancher   --namespace cattle-system   --set hostname=yang-infra.ci-qa.rancher.space   --set ingress.tls.source=letsEncrypt   --set letsEncrypt.email=yang.chiu@suse.com  --set letsEncrypt.ingress.class=nginx
   59  kubectl -n cattle-system rollout status deploy/rancher
   60  history

   helm install rancher rancher-latest/rancher \
  --namespace cattle-system \
  --set hostname=yang-infra.ci-qa.rancher.space \
  --set ingress.tls.source=letsEncrypt \
  --set letsEncrypt.email=yang.chiu@suse.com \
  --set letsEncrypt.ingress.class=nginx

