root@yang-server:~# history
    1  apt-get update -y
    2  curl -sfL https://get.k3s.io | sh -
    3  curl -sfL https://get.k3s.io | sh
    4  kubectl get nodes -o wide
    5  curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3
    6  curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | sh
    7  chmod 700 get_helm.sh
    8  ./get_helm.sh
    9  export KUBECONFIG=/etc/rancher/k3s/k3s.yaml
   10  helm list
   11  helm install rancher rancher-stable/rancher   --namespace cattle-system   --set hostname=yang-infra.ci-qa.rancher.space   --set ingress.tls.source=letsEncrypt   --set letsEncrypt.email=yang.chiu@suse.com
   12  helm repo add rancher-latest https://releases.rancher.com/server-charts/latest
   13  kubectl create namespace cattle-system
   14  kubectl apply --validate=false -f https://github.com/jetstack/cert-manager/releases/download/v1.0.4/cert-manager.crds.yaml
   15  kubectl create namespace cert-manager
   16  helm repo add jetstack https://charts.jetstack.io
   17  helm repo update
   18  helm install cert-manager jetstack/cert-manager --namespace cert-manager --version v1.4.0
   19  kubectl get pods --namespace cert-manager
   20  helm install rancher rancher-stable/rancher   --namespace cattle-system   --set hostname=yang-infra.ci-qa.rancher.space   --set ingress.tls.source=letsEncrypt   --set letsEncrypt.email=yang.chiu@suse.com
   21  helm repo add rancher-stable https://releases.rancher.com/server-charts/stable
   22  helm repo update
   23  helm install rancher rancher-stable/rancher   --namespace cattle-system   --set hostname=yang-infra.ci-qa.rancher.space   --set ingress.tls.source=letsEncrypt   --set letsEncrypt.email=yang.chiu@suse.com
   24  kubectl -n cattle-system rollout status deploy/rancher
   25  kubectl get secret --namespace cattle-system bootstrap-secret -o go-template='{{.data.bootstrapPassword|base64decode}}{{"\n"}}'
   26  add repo in rancher:  https://charts.jenkins.io
   27  kubectl get ingress
   28  kubectl get svc
   29  add repo in rancher:  https://charts.jenkins.io
   30  kubectl get pods -n jenkins
   31  kubectl describe pod -n jenkins jenkins-0
   32  kubectl logs -n jenkins jenkins-0
   33  kubectl logs -n jenkins jenkins-0 -c init
   34  kubectl get pods -n jenkins
   35  kubectl logs -n jenkins jenkins-0 -c init
   36  kubectl get pods -n jenkins
   37  kubectl logs -n jenkins jenkins-0 -c init
   38  kubectl get pods -n jenkins
   39  kubectl delete pod jenkins-0 -n jenkins
   40  kubectl get pods -n jenkins
   41  kubectl logs -n jenkins jenkins-0 -c init
   42  kubectl logs -n jenkins jenkins-0 -c init -w
   43  kubectl logs -n jenkins jenkins-0 -c init -f
   44  kubectl logs -n jenkins jenkins-0
   45  kubectl logs -n jenkins jenkins-0 -c jenkins
   46  kubectl logs -n jenkins jenkins-0 -c jenkins | grep 'Boots'
   47  kubectl logs -n jenkins jenkins-0 -c jenkins | grep -o 'Boots'
   48  kubectl logs -n jenkins jenkins-0 -c jenkins | grep -o 'boots'
   49  kubectl exec --namespace jenkins -it svc/jenkins -c jenkins -- /bin/cat /run/secrets/chart-admin-password && echo
   50  ls /root/.cahce
   51  ls /root/.cache
   52  history
   ---
   root@yang-server:~# history
    1  apt-get update -y
    2  curl -sfL https://get.k3s.io | sh
    3  ls /etc/
    4  curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3
    5  chmod 700 get_helm.sh
    6  ./get_helm.sh
    7  export KUBECONFIG=/etc/rancher/k3s/k3s.yaml
    8  helm list
    9  helm repo add rancher-latest https://releases.rancher.com/server-charts/latest
   10  kubectl create namespace cattle-system
   11  kubectl apply --validate=false -f https://github.com/jetstack/cert-manager/releases/download/v1.0.4/cert-manager.crds.yaml
   12  kubectl create namespace cert-manager
   13  helm repo add jetstack https://charts.jetstack.io
   14  helm repo update
   15  helm install cert-manager jetstack/cert-manager --namespace cert-manager --version v1.4.0
   16  kubectl get pods --namespace cert-manager
   17  helm repo add rancher-stable https://releases.rancher.com/server-charts/stable
   18  helm repo update
   19  helm install rancher rancher-stable/rancher   --namespace cattle-system   --set hostname=yang-infra.ci-qa.rancher.space   --set ingress.tls.source=letsEncrypt   --set letsEncrypt.email=yang.chiu@suse.com
   20  kubectl -n cattle-system rollout status deploy/rancher
   21  kubectl get all -A
   22  kubectl get service/traefik -n kube-system -o yaml
   23  ls
   24  ls -al
   25  cd .config/
   26  ls
   27  cd helm
   28  ls
   29  cd ..
   30  ls
   31  cd ..
   32  ls
   33  cd /etc/k3s
   34  ls
   35  cd /etc
   36  ls
   37  cd rancher/
   38  ls
   39  cd k3s/
   40  ls
   41  ls -al
   42  cd ..
   43  ls
   44  ls -al
   45  cd node
   46  ls
   47  cat password
   48  cat /var/lib/rancher/k3s/server/manifests/traefik.yaml
   49  kubectl apply -f https://github.com/jetstack/cert-manager/releases/download/v1.5.1/cert-manager.crds.yaml
   50  helm install cert-manager jetstack/cert-manager   --namespace cert-manager   --create-namespace   --version v1.5.1
   51  export
   52  export KUBECONFIG=/etc/rancher/k3s/k3s.yaml
   53  helm install cert-manager jetstack/cert-manager   --namespace cert-manager   --create-namespace   --version v1.5.1
   54  helm uninstall cert-manager -n cert-manager
   55  helm install cert-manager jetstack/cert-manager   --namespace cert-manager   --create-namespace   --version v1.5.1
   56  kubectl get pods --namespace cert-manager
   57  helm uninstall rancher -n cattle-system
   58  helm install rancher rancher-stable/rancher   --namespace cattle-system   --set hostname=yang-infra.ci-qa.rancher.space   --set ingress.tls.source=letsEncrypt   --set letsEncrypt.email=yang.chiu@suse.com  --set letsEncrypt.ingress.class=nginx
   59  kubectl -n cattle-system rollout status deploy/rancher
   60  history

   helm install rancher rancher-latest/rancher \
  --namespace cattle-system \
  --set hostname=yang-infra.ci-qa.rancher.space \
  --set ingress.tls.source=letsEncrypt \
  --set letsEncrypt.email=yang.chiu@suse.com \
  --set letsEncrypt.ingress.class=nginx
  ---
  1  curl -sfL https://get.rke2.io | sh -
    2  systemctl enable rke2-server.service
    3  systemctl start rke2-server.service
    4  journalctl -u rke2-server -f
    5  export KUBECONFIG=/etc/rancher/rke2/rke2.yaml
    6  kubectl get nodes
    7  curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"
    8  sudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl
    9  kubectl version --client
   10  kubectl get nodes
   11  kubectl get all -A
   12  helm repo add rancher-latest https://releases.rancher.com/server-charts/latest
   13  curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3
   14  chmod 700 get_helm.sh
   15  ./get_helm.sh
   16  helm repo add rancher-stable https://releases.rancher.com/server-charts/stable
   17  helm repo add rancher-latest https://releases.rancher.com/server-charts/latest
   18  kubectl create namespace cattle-system
   19  # If you have installed the CRDs manually instead of with the `--set installCRDs=true` option added to your Helm install command, you should upgrade your CRD resources before upgrading the Helm chart:
   20  kubectl apply -f https://github.com/jetstack/cert-manager/releases/download/v1.5.1/cert-manager.crds.yaml
   21  # Add the Jetstack Helm repository
   22  helm repo add jetstack https://charts.jetstack.io
   23  # Update your local Helm chart repository cache
   24  helm repo update
   25  # Install the cert-manager Helm chart
   26  helm install cert-manager jetstack/cert-manager   --namespace cert-manager   --create-namespace   --version v1.5.1
   27  kubectl get pods --namespace cert-managerkubectl get pods --namespace cert-manager
   28  kubectl get pods --namespace cert-manager
   29  kubectl -n cattle-system rollout status deploy/rancher
   30  kubectl get secret --namespace cattle-system bootstrap-secret -o go-template='{{.data.bootstrapPassword|base64decode}}{{"\n"}}'
   31  kubectl get pod -n jenkins
   32  kubectl describe pod jenkins-0 -n jenkins
   33  kubectl get nodes
   34  kubectl get nodes -o wide
   35  kubectl get nodes -o yaml
   36  kubectl describe pod jenkins-0 -n jenkins
   37  kubectl get pod -n jenkins
   38  kubectl delete pod jenkins-0 -n jenkins
   39  kubectl get pod -n jenkins
   40  kubectl describe pod jenkins-0 -n jenkins
   41  kubectl get all -n jenkins
   42  kubectl get pod jenkins-0 -n jenkins -o yaml
   43  kubectl logs jenkins-0 -n jenkins
   44  kubectl logs jenkins-0 -n jenkins -c config-reload
   45  kubectl logs jenkins-0 -n jenkins -c init
   46  kubectl logs jenkins-0 -n jenkins -c jenkins
   47  iptables
   48  sudo iptables -P FORWARD ACCEPT
   49  kubectl get all -n jenkins
   50  kubectl get pvc
   51  kubectl get pvc -n jenkions
   52  kubectl get pvc -n jenkins
   53  kubectl get pvc -n jenkins -o yaml
   54  kubectl get nodes -o yaml
   55  kubectl get pvc -n jenkins -o yaml
   56  kubectl get all -A
   57  kubectl apply -f https://raw.githubusercontent.com/rancher/local-path-provisioner/v0.0.22/deploy/local-path-storage.yaml
   58  kubectl get clusterissuers
   59  kubectl get clusterissuers -A
   60  ls
   61  nano issuer.yaml
   62  kubectl apply -f issuer.yaml
   63  nano issuer.yaml
   64  kubectl apply -f issuer.yaml
   65  kubectl get secret -n jenkins
   66  kubectl get secret yang-ci.ci-qa.rancher.space -n jenkins -o yaml
   67  kubectl get clusterissuers.cert-manager.io
   68  cat -f issuer.yaml
   69  cat issuer.yaml
   70  kubectl get pods -n jenkins
   71  kubectl describe pod default-hfg7d -n jenkins
   72  kubectl get pods -n jenkins
   73  ls
   74  pwd
   75  ls -al
   76  cd /tmp
   77  ls
   78  ls -al
   79  cd ls
   80  ls
   81  cd ..
   82  ls
   83  cd home
   84  ls
   85  cd ls
   86  cd ~
   87  ls
   88  ls -al
   89  ls
   90  cd /home
   91  ls
   92  ls -al
   93  cd /
   94  ls
   95  cd root
   96  ls
   97  mkdir test
   98  ls -al
   99  cd /
  100  ls
  101  cd var/
  102  ls
  103  ls -al
  104  cd tmp
  105  ls
  106  ls -al
  107  cd ../../
  108  cd ..
  109  ls
  110  cd run/
  111  ls
  112  ls -al
  113  cd ..
  114  ls
  115  cd usr
  116  ls
  117  cd share/
  118  ls
  119  ls -al
  120  cd ../../
  121  ls
  122  adduser jenkins
  123  ls
  124  cd home
  125  ls
  126  cd jenkins/
  127  ls
  128  ls -al
  129  mkdir .cache
  130  ls
  131  ls -al
  132  chmod 777 .cache
  133  ls
  134  ls -al
  135  ls
  136  ls -al
  137  cd .cache/
  138  ls
  139  cd jenkins_jobs/
  140  ls
  141  cd ..
  142  cd /var
  143  ls
  144  history


